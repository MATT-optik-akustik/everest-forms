!function(a,t){var e=a(document);t.updates.installExtension=function(s){var l=a(".plugin-card-"+s.slug),n=l.find(".install-now");return s=_.extend({success:t.updates.installExtensionSuccess,error:t.updates.installPluginError},s),n.html()!==t.updates.l10n.installing&&n.data("originaltext",n.html()),n.addClass("updating-message").attr("aria-label",t.updates.l10n.pluginInstallingLabel.replace("%s",n.data("name"))).text(t.updates.l10n.installing),t.a11y.speak(t.updates.l10n.installingMsg,"polite"),l.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),e.trigger("wp-plugin-installing",s),t.updates.ajax("install-extension",s)},t.updates.installExtensionSuccess=function(s){var l=a(".plugin-card-"+s.slug).find(".install-now"),n=a(".plugin-card-"+s.slug).find(".status.column-status span");l.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",t.updates.l10n.pluginInstalledLabel.replace("%s",s.pluginName)).text(t.updates.l10n.pluginInstalled),t.a11y.speak(t.updates.l10n.installedMsg,"polite"),e.trigger("wp-plugin-install-success",s),s.activateUrl&&setTimeout(function(){n.removeClass("status-install-now").addClass("status-active").text(t.updates.l10n.pluginInstalled),l.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",s.activateUrl).attr("aria-label",t.updates.l10n.activatePluginLabel.replace("%s",s.pluginName)).text(t.updates.l10n.activatePlugin)},1e3)},a(function(){e.on("click",".plugin-install .install-now",function(s){var l=a(s.target),n=a(this).data("name");s.preventDefault(),l.hasClass("updating-message")||l.hasClass("button-disabled")||(t.updates.shouldRequestFilesystemCredentials&&!t.updates.ajaxLocked&&(t.updates.requestFilesystemCredentials(s),e.on("credential-modal-cancel",function(){a(".install-now.updating-message").removeClass("updating-message").text(t.updates.l10n.installNow).attr("aria-label",t.updates.l10n.installNowLabel.replace("%s",n)),t.a11y.speak(t.updates.l10n.updateCancel,"polite")})),t.updates.installExtension({slug:l.data("slug"),name:l.data("name"),plugin:l.data("plugin"),pagenow:pagenow,success:t.updates.installExtensionSuccess,error:t.updates.installPluginError}))})})}(jQuery,window.wp);