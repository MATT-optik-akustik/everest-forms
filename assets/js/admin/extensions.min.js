!function(e,a){var s=e(document);a.updates.installExtension=function(t){var l=e(".plugin-card-"+t.slug),n=l.find(".install-now");return t=_.extend({success:a.updates.installExtensionSuccess,error:a.updates.installExtensionError},t),n.html()!==a.updates.l10n.installing&&n.data("originaltext",n.html()),n.addClass("updating-message").attr("aria-label",a.updates.l10n.pluginInstallingLabel.replace("%s",n.data("name"))).text(a.updates.l10n.installing),a.a11y.speak(a.updates.l10n.installingMsg,"polite"),l.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),s.trigger("wp-extension-installing",t),a.updates.ajax("everest_forms_install_extension",t)},a.updates.installExtensionSuccess=function(t){var l=e(".plugin-card-"+t.slug).find(".install-now"),n=e(".plugin-card-"+t.slug).find(".status-label");l.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",a.updates.l10n.pluginInstalledLabel.replace("%s",t.pluginName)).text(a.updates.l10n.pluginInstalled),a.a11y.speak(a.updates.l10n.installedMsg,"polite"),s.trigger("wp-plugin-install-success",t),t.activateUrl&&setTimeout(function(){n.removeClass("status-install-now").addClass("status-active").text(a.updates.l10n.pluginInstalled),l.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",t.activateUrl).attr("aria-label",a.updates.l10n.activatePluginLabel.replace("%s",t.pluginName)).text(a.updates.l10n.activatePlugin)},1e3)},a.updates.installExtensionError=function(t){var l,n=e(".plugin-card-"+t.slug),i=n.find(".install-now");a.updates.isValidResponse(t,"install")&&(a.updates.maybeHandleCredentialError(t,"everest_forms_install_extension")||(l=a.updates.l10n.installFailed.replace("%s",t.errorMessage),n.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+l+"</p></div>"),n.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){n.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),i.removeClass("updating-message").addClass("button-disabled").attr("aria-label",a.updates.l10n.pluginInstallFailedLabel.replace("%s",i.data("name"))).text(a.updates.l10n.installFailedShort),a.a11y.speak(l,"assertive"),s.trigger("wp-plugin-install-error",t)))},a.updates.queueChecker=function(){var e;if(!a.updates.ajaxLocked&&a.updates.queue.length){switch((e=a.updates.queue.shift()).action){case"everest_forms_install_extension":a.updates.installExtension(e.data)}s.trigger("wp-updates-queue-job",e)}},e(function(){e("#extension-filter").on("click",".extension-install .install-now",function(t){var l=e(t.target),n=e(this).data("name");t.preventDefault(),l.hasClass("updating-message")||l.hasClass("button-disabled")||(a.updates.shouldRequestFilesystemCredentials&&!a.updates.ajaxLocked&&(a.updates.requestFilesystemCredentials(t),s.on("credential-modal-cancel",function(){e(".install-now.updating-message").removeClass("updating-message").text(a.updates.l10n.installNow).attr("aria-label",a.updates.l10n.pluginInstallNowLabel.replace("%s",n)),a.a11y.speak(a.updates.l10n.updateCancel,"polite")})),a.updates.installExtension({name:n,slug:l.data("slug")}))})})}(jQuery,window.wp);